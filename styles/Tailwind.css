/* Tell Tailwind where your templates live (11ty: content + includes) */
@import "tailwindcss" source("../content");
@source "../_includes";

/* First-party plugin (v4 style) */
@plugin "@tailwindcss/typography";

/* Your design tokens (v4 theme variables) */
@theme {
  --font-sans: "Inter", ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  --font-serif: "Playfair Display", ui-serif, Georgia, serif;

  /* Custom brand colors -> utilities like text-vividcrimson, bg-huntergreen, etc. */
  --color-vividcrimson: #c8102e;
  --color-huntergreen: #33673b;
}

/* --- extra tokens for dark mode & muted copy --- */
@theme {
  --color-muted-foreground: #6b7280;

  /* brand link tokens for light/dark */
  --link: var(--color-vividcrimson);
  --link-dark: #ff6b81;            /* brighter crimson for dark backgrounds */

  /* lighter green for dark backgrounds (blockquote accent) */
  --color-huntergreen-light: #8fc8a3;
}

/* ---------- Base + prose theming ---------- */
@layer base {
  /* Global link styling (opt-out with .unstyled) */
  a:not(.unstyled) {
    @apply underline decoration-1 underline-offset-2 font-medium;
    color: var(--link);
  }
  a:not(.unstyled):is(:hover,:focus) {
    text-decoration: none;
  }

  html, body { @apply bg-white text-neutral-900; }

  /* Typography plugin tokens */
  .prose {
    --tw-prose-body: theme(colors.neutral.800);
    --tw-prose-headings: theme(colors.neutral.950);
    --tw-prose-lead: theme(colors.neutral.700);

    --tw-prose-links: var(--link);
    --tw-prose-underline: var(--link);
    --tw-prose-links-hover: theme(colors.red.800);

    --tw-prose-quotes: var(--color-huntergreen);
    --tw-prose-quote-borders: var(--color-huntergreen);

    --tw-prose-bold: theme(colors.neutral.950);
    --tw-prose-counters: theme(colors.neutral.600);
    --tw-prose-bullets: theme(colors.neutral.400);
    --tw-prose-hr: theme(colors.neutral.200);
    --tw-prose-captions: theme(colors.neutral.600);
    --tw-prose-code: theme(colors.neutral.900);
    --tw-prose-pre-bg: theme(colors.neutral.50);
  }

  .prose blockquote { @apply border-l-4 pl-5 italic; }
}

/* ---------- Dark mode overrides ---------- */
/* We flip by toggling data-theme="dark" on <html> */
html[data-theme="dark"] { color-scheme: dark; }

html[data-theme="dark"] body {
  @apply bg-neutral-950 text-neutral-100;
}

/* Links: brighter crimson on dark */
html[data-theme="dark"] a:not(.unstyled) {
  color: var(--link-dark);
}

/* Prose tokens in dark */
html[data-theme="dark"] .prose {
  --tw-prose-body: theme(colors.neutral.200);
  --tw-prose-headings: theme(colors.neutral.50);
  --tw-prose-lead: theme(colors.neutral.300);

  --tw-prose-links: var(--link-dark);
  --tw-prose-underline: var(--link-dark);
  --tw-prose-links-hover: theme(colors.rose.300);

  --tw-prose-quotes: var(--color-huntergreen-light);
  --tw-prose-quote-borders: var(--color-huntergreen-light);

  --tw-prose-bold: theme(colors.neutral.50);
  --tw-prose-counters: theme(colors.neutral.400);
  --tw-prose-bullets: theme(colors.neutral.600);
  --tw-prose-hr: theme(colors.neutral.800);
  --tw-prose-captions: theme(colors.neutral.400);
  --tw-prose-code: theme(colors.neutral.100);
  --tw-prose-pre-bg: theme(colors.neutral.900);
}

@layer utilities {
  .container-readable { max-width: 68ch; margin-inline: auto; padding-inline: 1rem; }
  .text-muted-foreground { color: var(--color-muted-foreground); }
}

@layer components {
  .card { @apply rounded-2xl border border-neutral-200 bg-white/80 p-6 shadow-sm transition hover:shadow-md; }
  .container-page { @apply max-w-6xl mx-auto px-4; }

  /* theme toggle button */
  .theme-toggle {
    @apply ml-auto inline-flex items-center gap-2 rounded-md border border-neutral-200 px-3 py-1 text-sm
           bg-white/70 hover:bg-neutral-50;
  }
}

html[data-theme="dark"] .card {
  @apply border-neutral-800 bg-neutral-900/60;
}
